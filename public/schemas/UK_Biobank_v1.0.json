{
  "version": "1.0",
  "name": "UK Biobank",
  "description": "UK Biobank Brain Imaging Protocol validation schema. The UK Biobank is a large-scale biomedical database and research resource containing genetic, lifestyle, and health information from 500,000 UK participants. The brain imaging component, which began in 2014, aims to scan 100,000 participants using a standardized protocol across multiple Siemens Skyra 3T scanners. This schema validates DICOM compliance with the published UK Biobank brain MRI acquisition parameters.",
  "created": "2025-09-17T05:13:11.521Z",
  "authors": [
    "Ashley Stewart"
  ],
  "acquisitions": {
    "T1 structural brain images": {
      "description": "High-resolution 3D T1-weighted structural brain imaging using MPRAGE",
      "detailed_description": "## 3D T1-Weighted Structural Brain Imaging (MPRAGE)\n\n### Overview\nHigh-resolution T1-weighted anatomical imaging providing excellent gray matter/white matter contrast for morphometric analysis, volumetric measurements, and anatomical reference.\n\n### UK Biobank Data Field\n- **Field ID:** [20216](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20216)\n\n### Acquisition Parameters\n| Parameter | Value |\n|-----------|-------|\n| Resolution | 1×1×1 mm isotropic |\n| Field of View | 208×256×256 matrix |\n| Scan Duration | 5 minutes |\n| Sequence | 3D MPRAGE |\n| Orientation | Sagittal |\n| Parallel Imaging | iPAT=2 (GRAPPA) |\n| TR | 2000 ms |\n| TE | 2.01 ms |\n| TI | 880 ms |\n| Flip Angle | 8° |\n\n### Technical Notes\n- **Prescan Normalize:** Enabled for intensity correction\n- **Sequence Variant:** Magnetization prepared with inversion recovery (IR)\n- **Output:** Two series typically produced - with and without NORM (intensity normalization)\n\n### Clinical/Research Applications\n- Brain volumetrics and morphometry\n- Cortical thickness analysis\n- Tissue segmentation (GM/WM/CSF)\n- Anatomical reference for co-registration\n- Voxel-based morphometry (VBM)\n\n### Resources\n- [UK Biobank Brain Imaging Documentation](https://biobank.ctsu.ox.ac.uk/crystal/crystal/docs/brain_mri.pdf)\n- [UK Biobank Brain Imaging Protocol](https://www.fmrib.ox.ac.uk/ukbiobank/protocol/)\n- [Miller et al. Nature Neuroscience 2016](https://doi.org/10.1038/nn.4393)",
      "fields": [
        {
          "field": "SeriesDescription",
          "tag": "0008,103E",
          "value": "T1_p2_1mm_fov256_sag_TI_880"
        },
        {
          "field": "SequenceName",
          "tag": "0018,0024",
          "value": "*tfl3d1_16ns"
        },
        {
          "field": "SequenceVariant",
          "tag": "0018,0021",
          "value": [
            "SK",
            "SP",
            "MP",
            "OSP"
          ]
        },
        {
          "field": "ScanningSequence",
          "tag": "0018,0020",
          "value": [
            "GR",
            "IR"
          ]
        },
        {
          "field": "Manufacturer",
          "tag": "0008,0070",
          "value": "SIEMENS"
        },
        {
          "field": "ManufacturerModelName",
          "tag": "0008,1090",
          "value": "Skyra"
        },
        {
          "field": "MRAcquisitionType",
          "tag": "0018,0023",
          "value": "3D"
        },
        {
          "field": "SliceThickness",
          "tag": "0018,0050",
          "value": 1
        },
        {
          "field": "PixelSpacing",
          "tag": "0028,0030",
          "value": [
            1,
            1
          ]
        },
        {
          "field": "Rows",
          "tag": "0028,0010",
          "value": 256
        },
        {
          "field": "Columns",
          "tag": "0028,0011",
          "value": 256
        },
        {
          "field": "AcquisitionMatrix",
          "tag": "0018,1310",
          "value": [
            0,
            256,
            256,
            0
          ]
        },
        {
          "field": "RepetitionTime",
          "tag": "0018,0080",
          "value": 2000
        },
        {
          "field": "EchoTime",
          "tag": "0018,0081",
          "value": 2.01
        },
        {
          "field": "InversionTime",
          "tag": "0018,0082",
          "value": 880
        },
        {
          "field": "FlipAngle",
          "tag": "0018,1314",
          "value": 8
        },
        {
          "field": "EchoTrainLength",
          "tag": "0018,0091",
          "value": 1
        },
        {
          "field": "PixelBandwidth",
          "tag": "0018,0095",
          "value": 240,
          "tolerance": 1
        },
        {
          "field": "InPlanePhaseEncodingDirection",
          "tag": "0018,1312",
          "value": "ROW"
        },
        {
          "field": "NumberOfPhaseEncodingSteps",
          "tag": "0018,0089",
          "value": 269
        },
        {
          "field": "MagneticFieldStrength",
          "tag": "0018,0087",
          "value": 3,
          "tolerance": 0.3
        },
        {
          "field": "ImagingFrequency",
          "tag": "0018,0084",
          "value": 123.26391,
          "tolerance": 1
        },
        {
          "field": "ImagedNucleus",
          "tag": "0018,0085",
          "value": "1H"
        },
        {
          "field": "TransmitCoilName",
          "tag": "0018,1251",
          "value": "Body"
        },
        {
          "field": "PercentSampling",
          "tag": "0018,0093",
          "value": 100
        },
        {
          "field": "PercentPhaseFieldOfView",
          "tag": "0018,0094",
          "value": 100
        },
        {
          "field": "ScanOptions",
          "tag": "0018,0022",
          "value": "IR"
        },
        {
          "field": "AngioFlag",
          "tag": "0018,0025",
          "value": "N"
        }
      ],
      "series": [
        {
          "name": "Series_001",
          "fields": [
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND",
                "NORM"
              ]
            }
          ]
        },
        {
          "name": "Series_002",
          "fields": [
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND"
              ]
            }
          ]
        }
      ]
    },
    "Functional brain images - task": {
      "description": "Task-based functional MRI using multiband EPI during Hariri faces/shapes emotional processing task",
      "detailed_description": "## Task-Based Functional MRI (Hariri Emotional Processing Task)\n\n### Overview\nBlood oxygen level-dependent (BOLD) functional imaging acquired during the Hariri faces/shapes emotional processing paradigm, designed to probe amygdala reactivity and emotional processing circuits.\n\n### UK Biobank Data Field\n- **Field ID:** [20217](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20217) (DICOM), [20249](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20249) (NIFTI)\n\n### Acquisition Parameters\n| Parameter | Value |\n|-----------|-------|\n| Resolution | 2.4×2.4×2.4 mm isotropic |\n| Field of View | 88×88×64 matrix (210 mm) |\n| Scan Duration | 4 minutes (332 timepoints) |\n| Sequence | Gradient Echo EPI |\n| TR | 735 ms |\n| TE | 39 ms |\n| Flip Angle | 52° |\n| Multiband Factor | 8 |\n| Parallel Imaging | None (no iPAT) |\n| Fat Saturation | Enabled |\n\n### Task Design\nThe Hariri faces/shapes task involves:\n- **Faces blocks:** Matching emotional faces (fear, anger)\n- **Shapes blocks:** Control condition matching geometric shapes\n- **Purpose:** Elicits robust amygdala activation for emotional processing assessment\n\n### Technical Notes\n- **CMRR Multiband:** Uses Center for Magnetic Resonance Research multiband sequence\n- **Single-Band Reference (SBRef):** Separate reference scan acquired with identical geometry but enhanced tissue contrast for motion correction and alignment\n- **High Temporal Resolution:** Sub-second TR enables improved temporal sampling\n\n### Clinical/Research Applications\n- Amygdala reactivity studies\n- Emotional processing research\n- Psychiatric disorder biomarkers\n- Brain-behavior correlations\n\n### Resources\n- [UK Biobank Brain Imaging Documentation](https://biobank.ctsu.ox.ac.uk/crystal/crystal/docs/brain_mri.pdf)\n- [Hariri et al. Science 2002](https://doi.org/10.1126/science.1071829)\n- [UK Biobank Brain Imaging Protocol](https://www.fmrib.ox.ac.uk/ukbiobank/protocol/)",
      "fields": [
        {
          "field": "SequenceName",
          "tag": "0018,0024",
          "value": "epfid2d1_88"
        },
        {
          "field": "SequenceVariant",
          "tag": "0018,0021",
          "value": [
            "SK",
            "SS"
          ]
        },
        {
          "field": "ScanningSequence",
          "tag": "0018,0020",
          "value": "EP"
        },
        {
          "field": "Manufacturer",
          "tag": "0008,0070",
          "value": "SIEMENS"
        },
        {
          "field": "ManufacturerModelName",
          "tag": "0008,1090",
          "value": "Skyra"
        },
        {
          "field": "MRAcquisitionType",
          "tag": "0018,0023",
          "value": "2D"
        },
        {
          "field": "SliceThickness",
          "tag": "0018,0050",
          "value": 2.4
        },
        {
          "field": "PixelSpacing",
          "tag": "0028,0030",
          "value": [
            2.38636,
            2.38636
          ]
        },
        {
          "field": "Rows",
          "tag": "0028,0010",
          "value": 704
        },
        {
          "field": "Columns",
          "tag": "0028,0011",
          "value": 704
        },
        {
          "field": "AcquisitionMatrix",
          "tag": "0018,1310",
          "value": [
            88,
            0,
            0,
            88
          ]
        },
        {
          "field": "RepetitionTime",
          "tag": "0018,0080",
          "value": 735
        },
        {
          "field": "EchoTime",
          "tag": "0018,0081",
          "value": 42.4
        },
        {
          "field": "FlipAngle",
          "tag": "0018,1314",
          "value": 51
        },
        {
          "field": "EchoTrainLength",
          "tag": "0018,0091",
          "value": 88
        },
        {
          "field": "MultibandFactor",
          "tag": "derived",
          "value": 8
        },
        {
          "field": "PixelBandwidth",
          "tag": "0018,0095",
          "value": 2030,
          "tolerance": 1
        },
        {
          "field": "InPlanePhaseEncodingDirection",
          "tag": "0018,1312",
          "value": "COL"
        },
        {
          "field": "NumberOfPhaseEncodingSteps",
          "tag": "0018,0089",
          "value": 88
        },
        {
          "field": "MagneticFieldStrength",
          "tag": "0018,0087",
          "value": 3,
          "tolerance": 0.3
        },
        {
          "field": "ImagingFrequency",
          "tag": "0018,0084",
          "value": 123.26392,
          "tolerance": 1
        },
        {
          "field": "ImagedNucleus",
          "tag": "0018,0085",
          "value": "1H"
        },
        {
          "field": "TransmitCoilName",
          "tag": "0018,1251",
          "value": "Body"
        },
        {
          "field": "PercentSampling",
          "tag": "0018,0093",
          "value": 100
        },
        {
          "field": "PercentPhaseFieldOfView",
          "tag": "0018,0094",
          "value": 100
        },
        {
          "field": "ScanOptions",
          "tag": "0018,0022",
          "value": "FS"
        },
        {
          "field": "AngioFlag",
          "tag": "0018,0025",
          "value": "N"
        }
      ],
      "series": [
        {
          "name": "Series_002",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "MB8_FMRI_fov210_2.4mm_task"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "MB",
                "ND",
                "MOSAIC"
              ]
            }
          ]
        },
        {
          "name": "Series_001",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "MB8_FMRI_fov210_2.4mm_task_SBRef"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND",
                "MOSAIC"
              ]
            }
          ]
        }
      ]
    },
    "Multiband diffusion brain images": {
      "description": "High angular resolution diffusion imaging (HARDI) with multiband acceleration for white matter microstructure",
      "detailed_description": "## Multiband Diffusion-Weighted Imaging (HARDI)\n\n### Overview\nHigh angular resolution diffusion imaging (HARDI) using multiband acceleration, designed for comprehensive white matter microstructure characterization including diffusion tensor imaging (DTI) and higher-order diffusion models.\n\n### UK Biobank Data Field\n- **Field ID:** [20218](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20218)\n\n### Acquisition Parameters\n| Parameter | Value |\n|-----------|-------|\n| Resolution | 2×2×2 mm isotropic |\n| Field of View | 104×104×72 matrix |\n| Scan Duration | 7 minutes (incl. 36s reversed phase-encode) |\n| Sequence | Spin Echo EPI |\n| TR | 3600 ms |\n| TE | 92 ms |\n| Flip Angle | 78° |\n| Multiband Factor | 3 |\n| Parallel Imaging | None (no iPAT) |\n| Fat Saturation | Enabled |\n\n### Diffusion Scheme\n| b-value (s/mm²) | Directions | Purpose |\n|-----------------|------------|----------|\n| 0 | 10 | Reference (non-diffusion weighted) |\n| 1000 | 50 | Standard DTI shell |\n| 2000 | 50 | Higher b-value for NODDI/DKI |\n\n- **Total unique directions:** 100 (all directions distinct across shells)\n- **Diffusion preparation:** Monopolar Stejskal-Tanner (higher SNR, shorter TE)\n\n### Distortion Correction\n- **Phase-encoding reversed data:** 36 seconds of reversed phase-encode (PA) acquisition\n- **Purpose:** Enables TOPUP/FSL distortion correction for EPI susceptibility artifacts\n- **Eddy current correction:** Applied in processed NIFTI data\n\n### Technical Notes\n- **Monopolar vs Bipolar:** Monopolar preparation chosen for SNR advantage despite stronger eddy currents (corrected in post-processing)\n- **Multi-shell design:** Enables advanced diffusion models (NODDI, DKI, CHARMED)\n\n### Clinical/Research Applications\n- White matter tract integrity (FA, MD, RD, AD)\n- Tractography and connectomics\n- Neurite orientation dispersion (NODDI)\n- Diffusion kurtosis imaging (DKI)\n- White matter hyperintensity characterization\n\n### Resources\n- [UK Biobank Brain Imaging Documentation](https://biobank.ctsu.ox.ac.uk/crystal/crystal/docs/brain_mri.pdf)\n- [UK Biobank Brain Imaging Protocol](https://www.fmrib.ox.ac.uk/ukbiobank/protocol/)\n- [Alfaro-Almagro et al. NeuroImage 2018](https://doi.org/10.1016/j.neuroimage.2017.10.034)",
      "fields": [
        {
          "field": "SequenceVariant",
          "tag": "0018,0021",
          "value": [
            "SK",
            "SS"
          ]
        },
        {
          "field": "ScanningSequence",
          "tag": "0018,0020",
          "value": "EP"
        },
        {
          "field": "Manufacturer",
          "tag": "0008,0070",
          "value": "SIEMENS"
        },
        {
          "field": "ManufacturerModelName",
          "tag": "0008,1090",
          "value": "Skyra"
        },
        {
          "field": "MRAcquisitionType",
          "tag": "0018,0023",
          "value": "2D"
        },
        {
          "field": "SliceThickness",
          "tag": "0018,0050",
          "value": 2
        },
        {
          "field": "PixelSpacing",
          "tag": "0028,0030",
          "value": [
            2.01923,
            2.01923
          ]
        },
        {
          "field": "AcquisitionMatrix",
          "tag": "0018,1310",
          "value": [
            104,
            0,
            0,
            104
          ]
        },
        {
          "field": "RepetitionTime",
          "tag": "0018,0080",
          "value": 3600
        },
        {
          "field": "EchoTime",
          "tag": "0018,0081",
          "value": 92
        },
        {
          "field": "FlipAngle",
          "tag": "0018,1314",
          "value": 78
        },
        {
          "field": "EchoTrainLength",
          "tag": "0018,0091",
          "value": 78
        },
        {
          "field": "MultibandFactor",
          "tag": "derived",
          "value": 3
        },
        {
          "field": "PixelBandwidth",
          "tag": "0018,0095",
          "value": 1780,
          "tolerance": 1
        },
        {
          "field": "InPlanePhaseEncodingDirection",
          "tag": "0018,1312",
          "value": "COL"
        },
        {
          "field": "NumberOfPhaseEncodingSteps",
          "tag": "0018,0089",
          "value": 78
        },
        {
          "field": "MagneticFieldStrength",
          "tag": "0018,0087",
          "value": 3,
          "tolerance": 0.3
        },
        {
          "field": "ImagingFrequency",
          "tag": "0018,0084",
          "value": 123.2639,
          "tolerance": 1
        },
        {
          "field": "ImagedNucleus",
          "tag": "0018,0085",
          "value": "1H"
        },
        {
          "field": "TransmitCoilName",
          "tag": "0018,1251",
          "value": "Body"
        },
        {
          "field": "PercentSampling",
          "tag": "0018,0093",
          "value": 100
        },
        {
          "field": "PercentPhaseFieldOfView",
          "tag": "0018,0094",
          "value": 100
        },
        {
          "field": "ScanOptions",
          "tag": "0018,0022",
          "value": [
            "PFP",
            "FS"
          ]
        },
        {
          "field": "AngioFlag",
          "tag": "0018,0025",
          "value": "N"
        },
        {
          "field": "SequenceName",
          "tag": "0018,0024",
          "contains_any": ["ep_b", "epse2d"]
        }
      ],
      "series": [
        {
          "name": "Main Diffusion AP",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "diff_AP_MPopt_MB3_50b1000_50b2000_8b0_lowflip"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "DIFFUSION",
                "NONE",
                "MB",
                "ND",
                "MOSAIC"
              ]
            }
          ]
        },
        {
          "name": "Main Diffusion AP SBRef",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "diff_AP_MPopt_MB3_50b1000_50b2000_8b0_lowflip_SBRef"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND",
                "MOSAIC"
              ]
            }
          ]
        },
        {
          "name": "Distortion Correction PA",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "diff_PA_MPopt_MB3_3b0_lowflip"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "DIFFUSION",
                "NONE",
                "MB",
                "ND"
              ]
            }
          ]
        },
        {
          "name": "Distortion Correction PA SBRef",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "diff_PA_MPopt_MB3_3b0_lowflip_SBRef"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND"
              ]
            }
          ]
        }
      ],
      "rules": [
        {
          "id": "custom_1758075459044",
          "name": "Diffusion Directions",
          "description": "Checks expected number of diffusion gradient directions",
          "implementation": "# Count unique diffusion gradient directions for non-b0 images only\n# b≈0 images have arbitrary/meaningless orientation values\n\nb_values = value[\"DiffusionBValue\"]\norientations = value[\"DiffusionGradientOrientation\"]\n\n# Filter to non-b0 images (b > 50)\nnon_b0_mask = b_values > 50\nnon_b0_orientations = orientations[non_b0_mask]\n\nn_expected = 100\nn_actual = non_b0_orientations.nunique()\n\nif n_actual != n_expected:\n    raise ValueError(f\"Expected {n_expected} distinct diffusion gradient directions, but found {n_actual}.\")\n",
          "parameters": {},
          "fields": [
            "DiffusionGradientOrientation",
            "DiffusionBValue"
          ],
          "testCases": [
            {
              "id": "test_diffusion_directions_pass",
              "name": "100 unique directions (non-b0)",
              "data": {
                "DiffusionGradientOrientation": [
                  1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
                  11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
                  21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
                  31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
                  41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
                  51, 52, 53, 54, 55, 56, 57, 58, 59, 60,
                  61, 62, 63, 64, 65, 66, 67, 68, 69, 70,
                  71, 72, 73, 74, 75, 76, 77, 78, 79, 80,
                  81, 82, 83, 84, 85, 86, 87, 88, 89, 90,
                  91, 92, 93, 94, 95, 96, 97, 98, 99, 100
                ],
                "DiffusionBValue": [
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000
                ]
              },
              "expectedResult": "pass",
              "description": "Valid UK Biobank diffusion acquisition with 100 unique gradient directions (all non-b0)"
            },
            {
              "id": "test_diffusion_directions_pass_with_b0",
              "name": "100 directions + b0 images",
              "data": {
                "DiffusionGradientOrientation": [
                  0, 0, 0, 0, 0,
                  1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
                  11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
                  21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
                  31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
                  41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
                  51, 52, 53, 54, 55, 56, 57, 58, 59, 60,
                  61, 62, 63, 64, 65, 66, 67, 68, 69, 70,
                  71, 72, 73, 74, 75, 76, 77, 78, 79, 80,
                  81, 82, 83, 84, 85, 86, 87, 88, 89, 90,
                  91, 92, 93, 94, 95, 96, 97, 98, 99, 100
                ],
                "DiffusionBValue": [
                  5, 5, 5, 5, 5,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000
                ]
              },
              "expectedResult": "pass",
              "description": "100 unique non-b0 directions plus b≈0 images (b0 orientations are excluded from count)"
            },
            {
              "id": "test_diffusion_directions_fail_too_few",
              "name": "Only 50 directions",
              "data": {
                "DiffusionGradientOrientation": [
                  1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
                  11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
                  21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
                  31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
                  41, 42, 43, 44, 45, 46, 47, 48, 49, 50
                ],
                "DiffusionBValue": [
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,
                  1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000,
                  2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000
                ]
              },
              "expectedResult": "fail",
              "description": "Insufficient diffusion directions - only 50 instead of required 100"
            }
          ]
        },
        {
          "id": "custom_1758079469072",
          "name": "B-value Distribution Validation",
          "description": "Validate b-value shell distribution. UK Biobank spec: 10x b=0, 50x b=1000, 50x b=2000. Tolerances allow for variation in actual acquisitions (including PA series for distortion correction).",
          "implementation": "# value is a DataFrame with unique DiffusionBValue and Count columns\nb_values = value[\"DiffusionBValue\"]\ncounts = value[\"Count\"]\n\n# Sum counts for each b-value shell (actual image counts, not unique values)\nb0_count = counts[b_values < 50].sum()\nb1000_count = counts[(b_values >= 900) & (b_values <= 1100)].sum()\nb2000_count = counts[(b_values >= 1900) & (b_values <= 2100)].sum()\n\n# Minimum counts (spec: 10 b0, 50 b1000, 50 b2000; reference data has 5 b0)\nif b0_count < 5:\n  raise ValueError(f\"Expected at least 5 b≈0 images, found {b0_count}\")\n\nif b1000_count < 45:\n  raise ValueError(f\"Expected at least 45 b≈1000 images (spec: 50), found {b1000_count}\")\n\nif b2000_count < 45:\n  raise ValueError(f\"Expected at least 45 b≈2000 images (spec: 50), found {b2000_count}\")",
          "parameters": {},
          "fields": [
            "DiffusionBValue"
          ],
          "enabledSystemFields": ["Count"],
          "testCases": [
            {
              "id": "test_bvalue_distribution_pass_spec",
              "name": "Matches UK Biobank spec",
              "data": {
                "DiffusionBValue": [5, 1000, 2000],
                "Count": [10, 50, 50]
              },
              "expectedResult": "pass",
              "description": "Matches UK Biobank spec: 10 b≈0, 50 b=1000, 50 b=2000"
            },
            {
              "id": "test_bvalue_distribution_pass_with_pa",
              "name": "With PA series (higher counts)",
              "data": {
                "DiffusionBValue": [5, 1000, 2000],
                "Count": [221, 266, 50]
              },
              "expectedResult": "pass",
              "description": "Higher counts acceptable - matches actual UK Biobank data with PA series"
            },
            {
              "id": "test_bvalue_distribution_fail_b0",
              "name": "Too few b=0 images",
              "data": {
                "DiffusionBValue": [5, 1000, 2000],
                "Count": [3, 50, 50]
              },
              "expectedResult": "fail",
              "description": "Only 3 b≈0 images, minimum is 8"
            },
            {
              "id": "test_bvalue_distribution_fail_b1000",
              "name": "Too few b=1000 images",
              "data": {
                "DiffusionBValue": [5, 1000, 2000],
                "Count": [10, 20, 50]
              },
              "expectedResult": "fail",
              "description": "Only 20 b=1000 images, minimum is 45"
            },
            {
              "id": "test_bvalue_distribution_fail_b2000",
              "name": "Too few b=2000 images",
              "data": {
                "DiffusionBValue": [5, 1000, 2000],
                "Count": [10, 50, 30]
              },
              "expectedResult": "fail",
              "description": "Only 30 b=2000 images, minimum is 45"
            }
          ]
        }
      ]
    },
    "Susceptibility weighted brain images": {
      "description": "Dual-echo susceptibility-weighted imaging for iron, microbleeds, and venous visualization",
      "detailed_description": "## Susceptibility-Weighted Imaging (SWI)\n\n### Overview\nDual-echo gradient echo acquisition optimized for susceptibility contrast, enabling visualization of venous structures, microbleeds, iron deposition, and calcifications. Also suitable for quantitative susceptibility mapping (QSM).\n\n### UK Biobank Data Field\n- **Field ID:** [20219](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20219)\n\n### Acquisition Parameters\n| Parameter | Value |\n|-----------|-------|\n| Resolution | 0.8×0.8×3 mm |\n| Field of View | 256×288×48 matrix |\n| Scan Duration | 2.5 minutes |\n| Sequence | 3D Gradient Echo |\n| Orientation | Axial |\n| TR | 27 ms |\n| TE₁ | 9.42 ms |\n| TE₂ | 20 ms (19.7 ms) |\n| Flip Angle | 15° |\n| Parallel Imaging | iPAT=2 (GRAPPA) |\n| Partial Fourier | 7/8 |\n\n### Output Series\nFor each echo time, separate magnitude and phase images are produced:\n- **Magnitude images:** For SWI minimum intensity projection (mIP)\n- **Phase images:** For QSM reconstruction and phase-based analysis\n\n### Technical Notes\n- **Dual-echo acquisition:** Enables T2* mapping and improved QSM\n- **Prescan Normalize:** Enabled for intensity correction\n- **Coil combination:** Early data (Oct 2015) saved per-coil; later combined on scanner\n- **High in-plane resolution:** 0.8 mm for detailed venous visualization\n\n### Clinical/Research Applications\n- Cerebral microbleed detection\n- Iron deposition quantification (basal ganglia, substantia nigra)\n- Quantitative susceptibility mapping (QSM)\n- Venous anomaly detection\n- Calcification vs hemorrhage differentiation\n- Neurodegenerative disease biomarkers\n\n### Resources\n- [UK Biobank Brain Imaging Documentation](https://biobank.ctsu.ox.ac.uk/crystal/crystal/docs/brain_mri.pdf)\n- [UK Biobank Brain Imaging Protocol](https://www.fmrib.ox.ac.uk/ukbiobank/protocol/)\n- [QSM Consensus Guidelines](https://doi.org/10.1002/mrm.30006)",
      "fields": [
        {
          "field": "SeriesDescription",
          "tag": "0008,103E",
          "value": "SWI_3mm_Updated_v1.1"
        },
        {
          "field": "SequenceName",
          "tag": "0018,0024",
          "value": "*fl3d2r"
        },
        {
          "field": "SequenceVariant",
          "tag": "0018,0021",
          "value": [
            "SP",
            "OSP"
          ]
        },
        {
          "field": "ScanningSequence",
          "tag": "0018,0020",
          "value": "GR"
        },
        {
          "field": "Manufacturer",
          "tag": "0008,0070",
          "value": "SIEMENS"
        },
        {
          "field": "ManufacturerModelName",
          "tag": "0008,1090",
          "value": "Skyra"
        },
        {
          "field": "MRAcquisitionType",
          "tag": "0018,0023",
          "value": "3D"
        },
        {
          "field": "SliceThickness",
          "tag": "0018,0050",
          "value": 3
        },
        {
          "field": "PixelSpacing",
          "tag": "0028,0030",
          "value": [
            0.79861,
            0.79861
          ]
        },
        {
          "field": "Rows",
          "tag": "0028,0010",
          "value": 288
        },
        {
          "field": "Columns",
          "tag": "0028,0011",
          "value": 256
        },
        {
          "field": "AcquisitionMatrix",
          "tag": "0018,1310",
          "value": [
            0,
            288,
            256,
            0
          ]
        },
        {
          "field": "RepetitionTime",
          "tag": "0018,0080",
          "value": 27
        },
        {
          "field": "FlipAngle",
          "tag": "0018,1314",
          "value": 15
        },
        {
          "field": "EchoTrainLength",
          "tag": "0018,0091",
          "value": 2
        },
        {
          "field": "PixelBandwidth",
          "tag": "0018,0095",
          "value": 140,
          "tolerance": 1
        },
        {
          "field": "InPlanePhaseEncodingDirection",
          "tag": "0018,1312",
          "value": "ROW"
        },
        {
          "field": "NumberOfPhaseEncodingSteps",
          "tag": "0018,0089",
          "value": 223
        },
        {
          "field": "MagneticFieldStrength",
          "tag": "0018,0087",
          "value": 3,
          "tolerance": 0.3
        },
        {
          "field": "ImagingFrequency",
          "tag": "0018,0084",
          "value": 123.26392,
          "tolerance": 1
        },
        {
          "field": "ImagedNucleus",
          "tag": "0018,0085",
          "value": "1H"
        },
        {
          "field": "TransmitCoilName",
          "tag": "0018,1251",
          "value": "Body"
        },
        {
          "field": "PercentSampling",
          "tag": "0018,0093",
          "value": 100
        },
        {
          "field": "PercentPhaseFieldOfView",
          "tag": "0018,0094",
          "value": 88.88889
        },
        {
          "field": "ScanOptions",
          "tag": "0018,0022",
          "value": "PFP"
        },
        {
          "field": "AngioFlag",
          "tag": "0018,0025",
          "value": "N"
        }
      ],
      "series": [
        {
          "name": "TE1",
          "fields": [
            {
              "field": "EchoTime",
              "tag": "0018,0081",
              "value": 9.42
            }
          ]
        },
        {
          "name": "TE2",
          "fields": [
            {
              "field": "EchoTime",
              "tag": "0018,0081",
              "value": 19.7
            }
          ]
        }
      ],
      "rules": [
        {
          "id": "custom_1758084379924",
          "name": "Expected number of echoes",
          "description": "Expected two echoes",
          "implementation": "expected = 2\nactual = value['EchoTime'].nunique()\n\nif expected != actual:\n  raise ValidationError(f\"Expected {expected} echoes but got {actual}.\")",
          "parameters": {},
          "fields": [
            "EchoTime"
          ],
          "testCases": [
            {
              "id": "test_swi_echo_count_pass",
              "name": "Two echoes",
              "data": {
                "EchoTime": [9.42, 9.42, 19.7, 19.7]
              },
              "expectedResult": "pass",
              "description": "Valid SWI acquisition with two unique echo times"
            },
            {
              "id": "test_swi_echo_count_fail_single",
              "name": "Single echo",
              "data": {
                "EchoTime": [9.42, 9.42, 9.42, 9.42]
              },
              "expectedResult": "fail",
              "description": "Invalid - only one unique echo time instead of required two"
            },
            {
              "id": "test_swi_echo_count_fail_three",
              "name": "Three echoes",
              "data": {
                "EchoTime": [9.42, 15.0, 19.7]
              },
              "expectedResult": "fail",
              "description": "Invalid - three echo times instead of required two"
            }
          ]
        },
        {
          "id": "validate_image_type",
          "name": "Valid Magnitude/Phase Pairs",
          "description": "Each EchoTime must have at least one magnitude and phase image.",
          "implementation": "magnitude_counts = []\nphase_counts = []\n\nfor echo_time, group in value.groupby(\"EchoTime\"):\n    image_types = group[\"ImageType\"]\n    \n    # Count occurrences of 'M' and 'P' in ImageType tuples\n    magnitude_counts.append(sum('M' in image for image in image_types))\n    phase_counts.append(sum('P' in image for image in image_types))\n\nif not all(m >= 1 for m in magnitude_counts):\n    raise ValidationError(f\"Each EchoTime must have at least one magnitude image. Found {magnitude_counts}.\")\nif not all(p >= 1 for p in phase_counts):\n    raise ValidationError(f\"Each EchoTime must have at least one phase image. Found {phase_counts}.\")\n",
          "parameters": {},
          "fields": [
            "ImageType",
            "EchoTime"
          ],
          "testCases": [
            {
              "id": "test_swi_mag_phase_pass",
              "name": "Valid magnitude/phase pairs",
              "data": {
                "ImageType": [
                  ["ORIGINAL", "PRIMARY", "M"],
                  ["ORIGINAL", "PRIMARY", "P"],
                  ["ORIGINAL", "PRIMARY", "M"],
                  ["ORIGINAL", "PRIMARY", "P"]
                ],
                "EchoTime": [9.42, 9.42, 19.7, 19.7]
              },
              "expectedResult": "pass",
              "description": "Each echo time has both magnitude and phase images"
            },
            {
              "id": "test_swi_mag_phase_fail_missing_phase",
              "name": "Missing phase at TE2",
              "data": {
                "ImageType": [
                  ["ORIGINAL", "PRIMARY", "M"],
                  ["ORIGINAL", "PRIMARY", "P"],
                  ["ORIGINAL", "PRIMARY", "M"]
                ],
                "EchoTime": [9.42, 9.42, 19.7]
              },
              "expectedResult": "fail",
              "description": "Second echo time (19.7 ms) is missing phase image"
            },
            {
              "id": "test_swi_mag_phase_fail_missing_magnitude",
              "name": "Missing magnitude at TE1",
              "data": {
                "ImageType": [
                  ["ORIGINAL", "PRIMARY", "P"],
                  ["ORIGINAL", "PRIMARY", "M"],
                  ["ORIGINAL", "PRIMARY", "P"]
                ],
                "EchoTime": [9.42, 19.7, 19.7]
              },
              "expectedResult": "fail",
              "description": "First echo time (9.42 ms) is missing magnitude image"
            }
          ]
        }
      ]
    },
    "T2 FLAIR structural brain images": {
      "description": "3D T2-weighted FLAIR imaging for white matter lesion detection",
      "detailed_description": "## 3D T2-Weighted FLAIR Structural Imaging\n\n### Overview\nFluid-attenuated inversion recovery (FLAIR) imaging with CSF signal suppression, optimized for white matter lesion detection and characterization. Essential for identifying white matter hyperintensities (WMH) associated with aging and cerebrovascular disease.\n\n### UK Biobank Data Field\n- **Field ID:** [20220](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20220) (DICOM), [20253](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20253) (NIFTI)\n\n### Acquisition Parameters\n| Parameter | Value |\n|-----------|-------|\n| Resolution | 1.05×1×1 mm |\n| Field of View | 192×256×256 matrix |\n| Scan Duration | 6 minutes |\n| Sequence | 3D SPACE (Turbo Spin Echo) |\n| Orientation | Sagittal |\n| TR | 5000 ms |\n| TE | 395 ms |\n| TI | 1800 ms |\n| Flip Angle | 120° |\n| Parallel Imaging | iPAT=2 (GRAPPA) |\n| Partial Fourier | 7/8 |\n| Fat Saturation | Enabled |\n\n### Technical Notes\n- **SPACE sequence:** Siemens 3D turbo spin echo with variable flip angle refocusing\n- **Elliptical k-space scanning:** Reduces scan time while maintaining image quality\n- **Prescan Normalize:** Enabled for intensity correction\n- **CSF suppression:** Long TI (1800 ms) nulls CSF signal for improved lesion conspicuity\n\n### Clinical/Research Applications\n- White matter hyperintensity (WMH) quantification\n- Fazekas scoring of white matter lesions\n- Multiple sclerosis lesion detection\n- Cerebral small vessel disease assessment\n- Periventricular vs deep white matter lesion differentiation\n\n### Resources\n- [UK Biobank Brain Imaging Documentation](https://biobank.ctsu.ox.ac.uk/crystal/crystal/docs/brain_mri.pdf)\n- [UK Biobank Brain Imaging Protocol](https://www.fmrib.ox.ac.uk/ukbiobank/protocol/)\n- [Wardlaw et al. Lancet Neurology 2013](https://doi.org/10.1016/S1474-4422(13)70124-8)",
      "fields": [
        {
          "field": "SeriesDescription",
          "tag": "0008,103E",
          "value": "T2_flair_sag_p2_1mm_FS_ellip_pf78"
        },
        {
          "field": "SequenceName",
          "tag": "0018,0024",
          "value": "*spcir_284ns"
        },
        {
          "field": "SequenceVariant",
          "tag": "0018,0021",
          "value": [
            "SK",
            "SP",
            "MP"
          ]
        },
        {
          "field": "ScanningSequence",
          "tag": "0018,0020",
          "value": [
            "SE",
            "IR"
          ]
        },
        {
          "field": "Manufacturer",
          "tag": "0008,0070",
          "value": "SIEMENS"
        },
        {
          "field": "ManufacturerModelName",
          "tag": "0008,1090",
          "value": "Skyra"
        },
        {
          "field": "MRAcquisitionType",
          "tag": "0018,0023",
          "value": "3D"
        },
        {
          "field": "SliceThickness",
          "tag": "0018,0050",
          "value": 1.05
        },
        {
          "field": "PixelSpacing",
          "tag": "0028,0030",
          "value": [
            1,
            1
          ]
        },
        {
          "field": "Rows",
          "tag": "0028,0010",
          "value": 256
        },
        {
          "field": "Columns",
          "tag": "0028,0011",
          "value": 256
        },
        {
          "field": "AcquisitionMatrix",
          "tag": "0018,1310",
          "value": [
            0,
            256,
            256,
            0
          ]
        },
        {
          "field": "RepetitionTime",
          "tag": "0018,0080",
          "value": 5000
        },
        {
          "field": "EchoTime",
          "tag": "0018,0081",
          "value": 395
        },
        {
          "field": "InversionTime",
          "tag": "0018,0082",
          "value": 1800
        },
        {
          "field": "FlipAngle",
          "tag": "0018,1314",
          "value": 120
        },
        {
          "field": "EchoTrainLength",
          "tag": "0018,0091",
          "value": 254
        },
        {
          "field": "PixelBandwidth",
          "tag": "0018,0095",
          "value": 780,
          "tolerance": 1
        },
        {
          "field": "InPlanePhaseEncodingDirection",
          "tag": "0018,1312",
          "value": "ROW"
        },
        {
          "field": "NumberOfPhaseEncodingSteps",
          "tag": "0018,0089",
          "value": 209
        },
        {
          "field": "MagneticFieldStrength",
          "tag": "0018,0087",
          "value": 3,
          "tolerance": 0.3
        },
        {
          "field": "ImagingFrequency",
          "tag": "0018,0084",
          "value": 123.26392,
          "tolerance": 1
        },
        {
          "field": "ImagedNucleus",
          "tag": "0018,0085",
          "value": "1H"
        },
        {
          "field": "TransmitCoilName",
          "tag": "0018,1251",
          "value": "Body"
        },
        {
          "field": "PercentSampling",
          "tag": "0018,0093",
          "value": 100
        },
        {
          "field": "PercentPhaseFieldOfView",
          "tag": "0018,0094",
          "value": 100
        },
        {
          "field": "ScanOptions",
          "tag": "0018,0022",
          "value": [
            "IR",
            "PFP",
            "FS"
          ]
        },
        {
          "field": "AngioFlag",
          "tag": "0018,0025",
          "value": "N"
        }
      ],
      "series": [
        {
          "name": "Series_001",
          "fields": [
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND"
              ]
            }
          ]
        },
        {
          "name": "Series_002",
          "fields": [
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND",
                "NORM"
              ]
            }
          ]
        }
      ]
    },
    "Functional brain images - resting": {
      "description": "Resting-state functional MRI using multiband EPI for functional connectivity analysis",
      "detailed_description": "## Resting-State Functional MRI\n\n### Overview\nBlood oxygen level-dependent (BOLD) functional imaging acquired during eyes-open rest, designed for functional connectivity analysis and identification of resting-state brain networks.\n\n### UK Biobank Data Field\n- **Field ID:** [20225](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20225) (NIFTI), DICOM also available\n\n### Acquisition Parameters\n| Parameter | Value |\n|-----------|-------|\n| Resolution | 2.4×2.4×2.4 mm isotropic |\n| Field of View | 88×88×64 matrix (210 mm) |\n| Scan Duration | 6 minutes (490 timepoints) |\n| Sequence | Gradient Echo EPI |\n| TR | 735 ms |\n| TE | 39 ms |\n| Flip Angle | 52° |\n| Multiband Factor | 8 |\n| Parallel Imaging | None (no iPAT) |\n| Fat Saturation | Enabled |\n\n### Resting-State Protocol\n- **Eyes:** Open (fixation cross displayed)\n- **Duration:** 6 minutes continuous acquisition\n- **Instructions:** Participants asked to remain still and awake\n\n### Technical Notes\n- **CMRR Multiband:** Uses Center for Magnetic Resonance Research multiband sequence\n- **Single-Band Reference (SBRef):** Separate reference scan for motion correction and alignment\n- **High Temporal Resolution:** Sub-second TR (735 ms) enables improved temporal sampling and physiological noise characterization\n- **490 volumes:** Provides robust statistics for connectivity estimation\n\n### Clinical/Research Applications\n- Resting-state network identification (DMN, salience, executive, etc.)\n- Functional connectivity analysis\n- Independent component analysis (ICA)\n- Graph theory / connectomics\n- Brain-behavior correlations\n- Biomarkers for neurological/psychiatric conditions\n\n### Resources\n- [UK Biobank Brain Imaging Documentation](https://biobank.ctsu.ox.ac.uk/crystal/crystal/docs/brain_mri.pdf)\n- [UK Biobank Brain Imaging Protocol](https://www.fmrib.ox.ac.uk/ukbiobank/protocol/)\n- [Smith et al. PNAS 2009](https://doi.org/10.1073/pnas.0905267106)",
      "fields": [
        {
          "field": "SequenceName",
          "tag": "0018,0024",
          "value": "epfid2d1_88"
        },
        {
          "field": "SequenceVariant",
          "tag": "0018,0021",
          "value": [
            "SK",
            "SS"
          ]
        },
        {
          "field": "ScanningSequence",
          "tag": "0018,0020",
          "value": "EP"
        },
        {
          "field": "Manufacturer",
          "tag": "0008,0070",
          "value": "SIEMENS"
        },
        {
          "field": "ManufacturerModelName",
          "tag": "0008,1090",
          "value": "Skyra"
        },
        {
          "field": "MRAcquisitionType",
          "tag": "0018,0023",
          "value": "2D"
        },
        {
          "field": "SliceThickness",
          "tag": "0018,0050",
          "value": 2.4
        },
        {
          "field": "PixelSpacing",
          "tag": "0028,0030",
          "value": [
            2.38636,
            2.38636
          ]
        },
        {
          "field": "Rows",
          "tag": "0028,0010",
          "value": 704
        },
        {
          "field": "Columns",
          "tag": "0028,0011",
          "value": 704
        },
        {
          "field": "AcquisitionMatrix",
          "tag": "0018,1310",
          "value": [
            88,
            0,
            0,
            88
          ]
        },
        {
          "field": "RepetitionTime",
          "tag": "0018,0080",
          "value": 735
        },
        {
          "field": "EchoTime",
          "tag": "0018,0081",
          "value": 42.4
        },
        {
          "field": "FlipAngle",
          "tag": "0018,1314",
          "value": 51
        },
        {
          "field": "EchoTrainLength",
          "tag": "0018,0091",
          "value": 88
        },
        {
          "field": "MultibandFactor",
          "tag": "derived",
          "value": 8
        },
        {
          "field": "PixelBandwidth",
          "tag": "0018,0095",
          "value": 2030,
          "tolerance": 1
        },
        {
          "field": "InPlanePhaseEncodingDirection",
          "tag": "0018,1312",
          "value": "COL"
        },
        {
          "field": "NumberOfPhaseEncodingSteps",
          "tag": "0018,0089",
          "value": 88
        },
        {
          "field": "MagneticFieldStrength",
          "tag": "0018,0087",
          "value": 3,
          "tolerance": 0.3
        },
        {
          "field": "ImagingFrequency",
          "tag": "0018,0084",
          "value": 123.26389,
          "tolerance": 1
        },
        {
          "field": "ImagedNucleus",
          "tag": "0018,0085",
          "value": "1H"
        },
        {
          "field": "TransmitCoilName",
          "tag": "0018,1251",
          "value": "Body"
        },
        {
          "field": "PercentSampling",
          "tag": "0018,0093",
          "value": 100
        },
        {
          "field": "PercentPhaseFieldOfView",
          "tag": "0018,0094",
          "value": 100
        },
        {
          "field": "ScanOptions",
          "tag": "0018,0022",
          "value": "FS"
        },
        {
          "field": "AngioFlag",
          "tag": "0018,0025",
          "value": "N"
        }
      ],
      "series": [
        {
          "name": "Series_002",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "MB8_FMRI_fov210_2.4mm_resting"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "MB",
                "ND",
                "MOSAIC"
              ]
            }
          ]
        },
        {
          "name": "Series_001",
          "fields": [
            {
              "field": "SeriesDescription",
              "tag": "0008,103E",
              "value": "MB8_FMRI_fov210_2.4mm_resting_SBRef"
            },
            {
              "field": "ImageType",
              "tag": "0008,0008",
              "value": [
                "ORIGINAL",
                "PRIMARY",
                "M",
                "ND",
                "MOSAIC"
              ]
            }
          ]
        }
      ]
    }
  },
  "global_constraints": {}
}